# TwitchDonateMonitor

一款專為實況主設計的多平台斗內監控工具，可即時監控並顯示來自多個金流平台的贊助通知，並支援 OBS 整合功能。

## 功能特點

- **多平台支援**：同時監控 綠界、歐付寶、Streamlabs、HiveBee
- **即時通知**：透過 SignalR 與 Socket.IO 技術，即時接收並顯示斗內訊息
- **OBS 整合**：自動輸出斗內訊息至文字檔，方便 OBS 讀取並顯示於實況畫面
- **CSV 日誌**：自動記錄所有斗內紀錄，依日期分檔儲存
- **自訂訊息格式**：可自訂各平台的顯示訊息格式與別名

## 支援的平台與事件

| 平台 | 事件類型 | 擷取資訊 |
|------|----------|----------|
| 綠界 | 斗內 | 贊助者名稱、金額、訊息 |
| 歐付寶 | 斗內 | 贊助者名稱、金額、訊息 |
| HiveBee | 文字斗內 | 贊助者名稱、金額、訊息 |
| HiveBee | 影片斗內 | 贊助者名稱、金額、訊息 |
| Streamlabs | PayPal | 贊助者名稱、金額、幣別、訊息 |
| Streamlabs | 小奇點 | 贊助者名稱、小奇點數量、訊息 |
| Streamlabs | 贈送訂閱 | 贈送者名稱、訂閱層級、數量 |

## 系統需求

- Windows 作業系統
- .NET Framework 4.7.2 或更新版本

## 安裝方式

1. [下載最新版本的發行檔案](https://github.com/ga0321/TwitchDonateMonitor/releases/)
2. 解壓縮至任意資料夾
3. 執行 `DonateMonitor.exe`

## 使用說明

### 初始設定

啟動程式後，需設定至少一個金流平台：

1. **綠界**：填入您的綠界贊助成功動畫網址 (綠界廠商專區 > 實況主收款 > 贊助成功動畫網址)
2. **歐付寶**：填入您的歐富寶贊助成功動畫網址  (官網上方功能選單 > 我要收款 >實況主收款 > 實況主收款設定 > 贊助成功動畫網址)
3. **Streamlabs**：填入您的Streamlabs Socket API 符記 (官網右側頭像 > 帳戶設定 > API設定 > 應用程式符記 > Socket API 符記)
4. **HiveBee**：填入您的通知網址 (官網左側直播互動箱 > 互動工具箱 > 通知 > 通知網址)

點擊「啟動」後，程式將開始監控已設定的平台。

### 監控視窗

![MONITOR_WND](img/1.png)

- 主視窗會即時顯示來自各平台的斗內通知
- 上方狀態列顯示各平台的連線狀態（有效/無效）
- 所有斗內會依照時間自動記錄至 `csv/` 資料夾中

### 設定選項

點擊「設定」可自訂以下項目：

#### OBS 輸出模式
- **多行模式**：每則斗內訊息獨立一行
- **單行模式**：所有訊息以空格分隔（適合跑馬燈）

#### 訊息格式
可自訂各平台的訊息顯示格式，支援以下變數：
- `{0}` - 贊助者名稱
- `{1}` - 金額
- `{2}` - 幣別
- `{3}` - 訂閱等級（僅訂閱事件）

#### 自訂別名
- 匿名贊助者名稱
- 訂閱等級名稱（層級 1/2/3）
- 小奇點名稱
- 贈送訂閱名稱

## OBS 整合

![OBS_OUTPUT](img/2.png)

程式會將斗內訊息輸出至程式目錄下的 `obs.txt` 檔案。

### 設定步驟

1. 在 OBS 中新增「文字 (GDI+)」來源
2. 勾選「從檔案讀取」
3. 選擇 `obs.txt` 檔案路徑
4. 依需求調整字型、大小、顏色等樣式

## 日誌檔案

- **斗內記錄**：`csv/YYYY-MM-DD.csv` - 每日一個檔案，記錄所有斗內資訊
- **錯誤日誌**：`errors.log` - 記錄程式執行期間的錯誤訊息

### CSV 展示

![CSV_DEMO](img/3.png)

## 授權

本專案採用開源授權，詳見 [LICENSE.txt](LICENSE.txt)。
